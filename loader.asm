	@	/000

INIC	GD	/000
	MM	ADDR1
	+	FIM1
	MM	FIM1
	GD	/000
	MM	ADDR2
	MM	FIM2
	GD	/000
	MM	NUMBLK

LOOPBLK	GD	/000
	MM	BLKSIZE
	GD	/000
	MM	BLKSTR1
	GD	/000
	MM	BLKSTR2
    LV  /000
    MM  BLKCHKS2

LOOPDAT	LV	/90
	+	BLKSTR1
	MM	WRITE
	LV	/00
	+	BLKSTR2
	MM	WRITE2
	GD	/000
	JP	WRITE
POSW	+	BLKCHKS2 ; soma acc ao contador chksum
	MM	BLKCHKS2
	LD	BLKSTR2
	+	UM
	MM	BLKSTR2
	JZ	VAIUM
VOLTAVU	LD	BLKSIZE
	-	UM
	MM	BLKSIZE
	JZ	CHKEND
	JP	LOOPDAT

VAIUM	LD	BLKSTR1
	+	UM
	MM	BLKSTR1
	JP	VOLTAVU

CHKEND	GD	/000
	MM	BLKCHKS
    -   BLKCHKS2
    JZ CHKSOK
    OS  /FFF
CHKSOK	LD	NUMBLK
	-	UM
	MM	NUMBLK
	JZ	FIM1
	JP	LOOPBLK
	
WRITE	K	/90
WRITE2	K	/00
	JP	POSW

FIM1	K	/C0
FIM2	K	/00

ADDR1	K	/0
ADDR2	K	/0
NUMBLK	K	/0
BLKSIZE	K	/0
BLKSTR1	K	/0
BLKSTR2	K	/0
BLKCHKS	K	/0
BLKCHKS2 K	/0
UM	K	/01